(()=>{"use strict";var e={948:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EventEmitter=void 0;t.EventEmitter=class{constructor(){this.events={}}on(e,t){this.events[e]||(this.events[e]=[]),this.events[e].push(t)}emit(e,...t){if(this.events[e])for(const i of this.events[e])i(...t)}}},876:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Colors=t.ShapeType=t.Environment=t.Movement=t.Plugin=t.Vector=t.Renderer=t.Camera=t.Collision=t.Line=t.Circle=t.Polygon=t.Shape=t.Body=t.System=void 0;const s=i(799);Object.defineProperty(t,"System",{enumerable:!0,get:function(){return s.System}});const o=i(801),n=i(847),r=i(989);Object.defineProperty(t,"Body",{enumerable:!0,get:function(){return r.Body}});const h=i(22);Object.defineProperty(t,"Shape",{enumerable:!0,get:function(){return h.Shape}});const a=i(837);Object.defineProperty(t,"Polygon",{enumerable:!0,get:function(){return a.Polygon}});const l=i(459);Object.defineProperty(t,"Circle",{enumerable:!0,get:function(){return l.Circle}});const c=i(569);Object.defineProperty(t,"Line",{enumerable:!0,get:function(){return c.Line}});const d=i(703);Object.defineProperty(t,"Camera",{enumerable:!0,get:function(){return d.Camera}});const u=i(959);Object.defineProperty(t,"Renderer",{enumerable:!0,get:function(){return u.Renderer}});const p=i(875);Object.defineProperty(t,"Vector",{enumerable:!0,get:function(){return p.Vector}});const y=i(135);Object.defineProperty(t,"Plugin",{enumerable:!0,get:function(){return y.Plugin}});const g=i(537);Object.defineProperty(t,"Movement",{enumerable:!0,get:function(){return g.Movement}}),Object.defineProperty(t,"Environment",{enumerable:!0,get:function(){return g.Environment}}),Object.defineProperty(t,"ShapeType",{enumerable:!0,get:function(){return g.ShapeType}}),Object.defineProperty(t,"Colors",{enumerable:!0,get:function(){return g.Colors}});const m="undefined"!=typeof window;t.Collision={CollisionResolver:o.CollisionResolver,SpatialHashGrid:n.SpatialHashGrid},m&&(window.Kinetics={System:s.System,Body:r.Body,Shape:h.Shape,Polygon:a.Polygon,Circle:l.Circle,Line:c.Line,Collision:t.Collision,Camera:d.Camera,Renderer:u.Renderer,Vector:p.Vector,Plugin:y.Plugin,Movement:g.Movement,Environment:g.Environment,ShapeType:g.ShapeType,Colors:g.Colors})},799:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.System=void 0;const s=i(537),o=i(285),n=i(847),r=i(801),h=i(703),a=i(959),l=i(948),c=i(875);class d extends l.EventEmitter{get momentum(){let e=0;for(const t of this.bodys)t&&(e+=t.velocity.magnitude*t.shape.mass+Math.abs(t.shape.angularVelocity*t.shape.inertia)*t.shape.mass);return e}get kineticEnergy(){let e=0;for(const t of this.bodys)t&&(e+=.5*t.shape.mass*(t.velocity.magnitude*t.velocity.magnitude));return e}get nextId(){const e=this.bodys.indexOf(void 0);return-1!==e?e:this.bodys.length}constructor(e){var t,i;if(super(),this.width=null,this.height=null,this.friction=.1,this.gravity=new c.Vector(0,0),this.plugins=[],this.CollisionResolver=new r.CollisionResolver,this.bodys=[],this.verbose=!1,this.tick=0,this.tickRate=0,this.environment=s.Environment.Browser,this.performance={worldUpdateRate:0,memoryUsage:0},this.environment="undefined"==typeof window?s.Environment.Node:s.Environment.Browser,this.config=e,this.width=(null===(t=e.dimensions)||void 0===t?void 0:t.x)||null,this.height=(null===(i=e.dimensions)||void 0===i?void 0:i.y)||null,this.width&&!this.height||this.height&&!this.width)throw new o.ConfigurationError("Both dimensions must be specified for the system.");if(this.friction=e.friction||.1,this.gravity=e.gravity||new c.Vector(0,0),this.plugins=e.plugins||[],this.camera=new h.Camera(e.camera||{},this),e.render&&e.render.canvas&&(this.renderer=new a.Renderer(e.render,this)),this.verbose=e.verbose||!1,!e.collisionInfo)throw new o.ConfigurationError("Collision information must be specified for the system.");this.CollisionManager=new n.SpatialHashGrid(this,e.collisionInfo.cellSize||12),this.verbose&&console.log("[PHYSICS]: Engine started."),this.environment!==s.Environment.Browser?(this.tickRate=e.tickRate||60,setInterval(this.update.bind(this),1e3/this.tickRate)):requestAnimationFrame(this.update.bind(this))}setCollisionEngine(e){this.CollisionManager=e}update(){var e;const t=performance.now();this.CollisionManager.clear();for(const e of this.bodys)e&&(e.live?(this.CollisionManager.insert(e.shape.bounds.min.x,e.shape.bounds.min.y,e.shape.hitbox.x,e.shape.hitbox.y,e.id),e.update()):(this.bodys[e.id]=void 0,this.emit("bodyDelete",e)));this.CollisionManager.query();for(const e of this.plugins)e.update(this);this.tick++,this.performance.worldUpdateRate=performance.now()-t,this.performance.memoryUsage=this.environment===s.Environment.Browser?(null===(e=performance.memory)||void 0===e?void 0:e.usedJSHeapSize)/1024/1024:process.memoryUsage().heapUsed/1024/1024,this.environment===s.Environment.Browser&&requestAnimationFrame(this.update.bind(this))}addBody(e){const t=this.nextId;return e.id=t,e.system=this,this.bodys[t]=e,this.emit("bodyCreate",e),e}removeBody(e){return this.bodys[e.id]&&(e.live=!1),e}}t.System=d},989:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Body=void 0;const s=i(875);t.Body=class{get speed(){return this._speed}set speed(e){this._speed=e}get velocity(){return this.shape.velocity}set velocity(e){this.shape.velocity=e}set moveAngle(e){this.acceleration.x+=Math.cos(e),this.acceleration.y-=Math.sin(e),this.acceleration.normalize().scale(this.speed),this.velocity.add(this.acceleration)}constructor(e){this.live=!0,this._speed=1,this.acceleration=new s.Vector(0,0),this.plugins=[],this.shape=e,this.shape.body=this}collisioned(e){for(const t of[...this.system.plugins,...this.plugins])t.bodyCollisioned(this,e)}update(){this.shape.update(),this.acceleration.scale(0)}render(e){this.shape.render(e)}}},801:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CollisionResolver=void 0;const s=i(537);class o{detect(e,t){if(e.components.length&&t.components.length)for(const i of e.components)for(const e of t.components){if(this.detectSimple(i,e))break}else if(e.components.length||t.components.length){const i=e.components.length?e:t,s=e.components.length?t:e;for(const e of i.components){if(this.detectSimple(e,s))break}}else this.detectSimple(e,t)}processDetectedShapesEvents(e,t){e.lastCollisionFrame=e.tick,t.lastCollisionFrame=t.tick,e.body.collisioned(t.body),t.body.collisioned(e.body)}detectSimple(e,t){if(e.type===s.ShapeType.Circle&&t.type===s.ShapeType.Circle)return this.detectCircleCircle(e,t);if(e.type===s.ShapeType.Circle||t.type===s.ShapeType.Circle){const i=e.type===s.ShapeType.Circle?e:t,o=e.type===s.ShapeType.Circle?t:e;return o.type===s.ShapeType.Line?this.detectCircleLine(i,o):this.detectCirclePolygon(i,o)}let i,n=1/0;const r=e.vertices,h=t.vertices,a=r.length+h.length;for(let e=0;e<a;e++){let t;if(t=e<r.length?r[e].clone.subtract(r[(e+1)%r.length]).orthogonal.normalize():h[e-r.length].clone.subtract(h[(e+1)%h.length]).orthogonal.normalize(),0===t.x&&0===t.y)continue;const[s,a]=o.project(t,r),[l,c]=o.project(t,h),d=Math.min(a,c)-Math.max(s,l);if(d<=0)return!1;d<n&&(i=t,n=d)}return!!i&&(this.resolve(e.parent||e,t.parent||t,Math.max(e.elasticity,t.elasticity),n,i),this.processDetectedShapesEvents(e,t),!0)}detectCirclePolygon(e,t){const i=t.vertices;let s,n=1/0;for(let t=0;t<i.length;t++){const r=i[t],h=i[(t+1)%i.length].clone.subtract(r).orthogonal.normalize();if(0===h.x&&0===h.y)continue;const[a,l]=o.project(h,i),c=e.position.dot(h),d=Math.min(l,c+e.radius)-Math.max(a,c-e.radius);if(d<=0)return!1;d<n&&(n=d,s=h)}return!!s&&(this.resolve(e.parent||e,t.parent||t,Math.max(e.elasticity,t.elasticity),n,s),this.processDetectedShapesEvents(e,t),!0)}detectCircleCircle(e,t){const i=e.position.distance(t.position),s=e.radius+t.radius-i,o=e.position.clone.subtract(t.position).normalize();return!(s<=0)&&(!!o&&(this.resolve(e.parent||e,t.parent||t,Math.max(e.elasticity,t.elasticity),s,o),this.processDetectedShapesEvents(e,t),!0))}detectCircleLine(e,t){const i=t.start.clone.subtract(e.position),s=e.position.clone.subtract(t.end);let o;if(t.lineDir.dot(i)>0)o=t.start;else if(t.lineDir.dot(s)>0)o=t.end;else{const e=t.lineDir.dot(i),s=t.lineDir.clone.scale(e);o=t.start.clone.add(s)}const n=e.position.clone.subtract(o),r=n.clone.normalize(),h=e.radius-n.magnitude;return h>0&&(this.resolve(e.parent||e,t.parent||t,Math.max(e.elasticity,t.elasticity),h,r),this.processDetectedShapesEvents(e,t),!0)}static project(e,t){let i=1/0,s=-1/0;for(const o of t){const t=o.dot(e);i=Math.min(i,t),s=Math.max(s,t)}return[i,s]}resolve(e,t,i,s,o){var n,r,h,a,l,c,d,u;null===(r=(n=e.hooks).preResolve)||void 0===r||r.call(n,t),null===(a=(h=t.hooks).preResolve)||void 0===a||a.call(h,e),e.position.dot(o)<t.position.dot(o)&&o.scale(-1);const p=e.velocity,y=t.velocity,g=e.mass,m=t.mass,f=-(1+i)*p.clone.subtract(y).dot(o)/(1/g+1/m),v=o.clone.scale(f);e.static||e.velocity.add(v.clone.scale(1/g)),t.static||t.velocity.subtract(v.clone.scale(1/m)),e.static||t.static||(e.angularVelocity-=1/e.inertia*e.position.clone.subtract(t.position).cross(v),t.angularVelocity-=1/t.inertia*e.position.clone.subtract(t.position).cross(v));const x=o.clone.scale(s/(1/g+1/m));e.static||e.updatePosition(x.clone.scale(1/g)),t.static||t.updatePosition(x.clone.scale(-1/m)),null===(c=(l=e.hooks).postResolve)||void 0===c||c.call(l,t),null===(u=(d=t.hooks).postResolve)||void 0===u||u.call(d,e)}}t.CollisionResolver=o},847:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SpatialHashGrid=void 0;const s=i(285),o=(e,t)=>e+46340*t;t.SpatialHashGrid=class{constructor(e,t){if(this.cells=new Map,!Number.isInteger(t)||t>=32)throw new s.ConfigurationError("Could not initialize SpatialHashGrid: Cell size must be an integer value less than 32.");this.system=e,this.cellSize=t}insert(e,t,i,s,n){const r=e>>this.cellSize,h=t>>this.cellSize,a=e+i>>this.cellSize,l=t+s>>this.cellSize;for(let e=r;e<=a;e++)for(let t=h;t<=l;t++){const i=o(e,t);this.cells.get(i)||this.cells.set(i,[]),this.cells.get(i).push(n)}}query(){for(const e of this.cells.values()){const t=e.length;if(!(t<2))for(let i=0;i<t;i++)for(let s=i+1;s<t;s++){const t=this.system.bodys[e[i]],o=this.system.bodys[e[s]];if(!t.shape.sleeping||!o.shape.sleeping){this.system.CollisionResolver.detect(t.shape,o.shape);for(const e of this.system.plugins)e.bodyUpdate(t,o),e.bodyUpdate(o,t);for(const e of t.plugins)e.bodyUpdate(t,o);for(const e of o.plugins)e.bodyUpdate(o,t)}}}}clear(){this.cells.clear()}}},135:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Plugin=void 0;t.Plugin=class{constructor(){this.meta={name:"Plugin",version:"1.0.0"}}update(e){}bodyUpdate(e,t){}bodyCollisioned(e,t){}}},459:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Circle=void 0;const s=i(22),o=i(537),n=i(285),r=i(875);class h extends s.Shape{get bounds(){const e=this.position||this.vertices[0];return void 0===this.position&&(this.position=e),{min:new r.Vector(e.x-this.radius,e.y-this.radius),max:e,dimensions:this.hitbox}}get radius(){return this._radius}set radius(e){if(e<=0)throw new n.ConfigurationError("The radius of a circle must be greater than 0.");this._radius=e}get hitbox(){return new r.Vector(2*this.radius,2*this.radius)}get inertia(){return this.static?0:this.mass*this.radius*this.radius/2}constructor(e){super(e),this.type=o.ShapeType.Circle,this._radius=0,this.radius=e.radius}rotate(){}render(e){const{stroke:t,fill:i}=this.determineColors();this.rendering.glowIntensity&&(e.shadowBlur=this.rendering.glowIntensity,e.shadowColor=this.rendering.glowColor||t||i),e.beginPath(),i&&(e.fillStyle=i),t&&(e.strokeStyle=t),e.lineWidth=this.rendering.strokeWidth||1,e.arc(this.position.x,-this.position.y,this.radius,0,2*Math.PI),e.closePath(),e.stroke(),i&&e.fill(),t&&e.stroke()}}t.Circle=h},569:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Line=void 0;const s=i(537),o=i(875),n=i(22);class r extends n.Shape{get line(){return this.end.clone.subtract(this.start)}get lineDir(){return this.line.normalize()}get length(){return this.end.distance(this.start)}get minX(){return Math.min(this.start.x,this.end.x)}get minY(){return Math.min(this.start.y,this.end.y)}get maxX(){return Math.max(this.start.x,this.end.x)}get maxY(){return Math.max(this.start.y,this.end.y)}get width(){return this.maxX-this.minX}get height(){return this.maxY-this.minY}constructor(e){super(e),this.type=s.ShapeType.Line,this.start=new o.Vector(this.position.x,this.position.y),this.end=new o.Vector(e.endX,e.endY)}render(e){const{stroke:t,fill:i}=this.determineColors();this.rendering.glowIntensity&&(e.shadowBlur=this.rendering.glowIntensity,e.shadowColor=this.rendering.glowColor||t||i),e.beginPath(),i&&(e.fillStyle=i),t&&(e.strokeStyle=t),e.lineWidth=this.rendering.strokeWidth||1,e.moveTo(this.start.x,-this.start.y),e.lineTo(this.end.x,-this.end.y),e.closePath(),e.stroke(),i&&e.fill(),t&&e.stroke()}}t.Line=r},837:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Polygon=void 0;const s=i(22),o=i(537);class n extends s.Shape{constructor(){super(...arguments),this.type=o.ShapeType.Polygon}}t.Polygon=n},22:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Shape=void 0;const s=i(537),o=i(285),n=i(875);t.Shape=class{get sleeping(){return this.tick-this.lastCollisionFrame>5&&Math.abs(this.velocity.x)<this.sleepThreshold&&Math.abs(this.velocity.y)<this.sleepThreshold&&Math.abs(this.angularVelocity)<this.sleepThreshold}get hitbox(){return this.bounds.max.subtract(this.bounds.min)}get inertia(){if(this.static)return 0;const e=this.vertices;let t=0;for(let i=0;i<e.length;i++){const s=e[i],o=e[(i+1)%e.length];t+=s.cross(s)+o.cross(o)+s.cross(o)}return Math.abs(t)/12}get angle(){return this._angle}set angle(e){if(e===this._angle||!1===this.info.rotate)return;const t=e-this._angle,i=Math.cos(t),s=Math.sin(t);this._angle=e;for(let e=0;e<this.vertices.length;e++){const t=this.vertices[e].x-this.position.x,o=this.vertices[e].y-this.position.y,n=t*i-o*s,r=t*s+o*i;this.vertices[e].x=n+this.position.x,this.vertices[e].y=r+this.position.y}}get bounds(){let e=1/0,t=1/0,i=-1/0,s=-1/0;for(const o of this.vertices){const n=o.x,r=o.y;e=e>n?n:e,t=t>r?r:t,i=i<n?n:i,s=s<r?r:s}return void 0===this.position&&(this.position=new n.Vector((e+i)/2,(t+s)/2)),{min:new n.Vector(e,t),max:new n.Vector(i,s)}}get area(){let e=0;for(let t=0;t<this.vertices.length;t++)e+=this.vertices[t].cross(this.vertices[(t+1)%this.vertices.length]);return Math.abs(e/2)}constructor(e){this.tick=0,this.lastCollisionFrame=0,this.sleepThreshold=-1,this.type=s.ShapeType.Generic,this.velocity=new n.Vector(0,0),this.angularVelocity=0,this.angularSpeed=0,this.components=[],this.parent=null,this.hooks={},this._angle=0,this.info=e,this.vertices=this.initializeVertices(e),this.bounds,this.mass=e.mass,this.angularSpeed=e.angularSpeed||0,this.elasticity=Math.max(0,e.elasticity)||0,this.static=!!e.static,this.sleepThreshold=e.sleepThreshold||-1,this.configure(e.render||{}),this.hooks=e.hooks||{}}initializeVertices(e){if(!e.form)throw new o.ConfigurationError("No form was provided for the shape.");let t=[];if(e.form.components)for(const i of e.form.components){if(i.info.form.components)throw new o.ConfigurationError("Components cannot have components.");this.components.push(i),t.push(...i.vertices)}else if(e.form.vertices)t=e.form.vertices;else{if(!e.form.sides)throw new o.ConfigurationError("No form was provided for the shape.");{const i=[],s=e.form.radius;if(!s)throw new o.ConfigurationError("No radius was provided for the shape.");const r=2*Math.PI/e.form.sides;for(let t=0;t<e.form.sides;t++){const o=r*t+(e.form.rotation||0);i.push(n.Vector.toCartesian(s,o).add(e.form.offset||{x:0,y:0}))}t=i}}return t}configure(e){this.rendering={strokeColor:e.strokeColor,fillColor:e.fillColor,strokeWidth:e.strokeWidth||1,glowIntensity:e.glowIntensity,glowColor:e.glowColor,hooks:e.hooks||{}}}rotate(...e){for(const t of e)switch(t){case s.Movement.Up:this.angularVelocity+=this.angularSpeed;break;case s.Movement.Down:case s.Movement.Left:this.angularVelocity-=this.angularSpeed;break;case s.Movement.Right:this.angularVelocity+=this.angularSpeed;break;default:console.error("[SYSTEM]: Invalid angular movement key.")}}update(){this.static&&(this.velocity.x=this.velocity.y=this.angularVelocity=0),this.body.system.gravity&&!this.static&&this.velocity.add(this.body.system.gravity),this.velocity.scale(1-this.body.system.friction),this.angularVelocity*=1-this.body.system.friction,this.updatePosition(this.velocity),this.angle+=this.angularVelocity/100,this.tick++,this.body.system.emit("shapeUpdate",this)}updatePosition(e){if(this.static)return;const t=this.body.system.width,i=this.body.system.height;if(t&&i){const s=t/2,o=i/2;this.position.x+e.x>s?e.x=s-this.position.x:this.position.x+e.x<-s&&(e.x=-s-this.position.x),this.position.y+e.y>o?e.y=o-this.position.y:this.position.y+e.y<-o&&(e.y=-o-this.position.y)}this.position.add(e);for(const t of this.vertices)t.add(e)}determineColors(){let e,t;const i=this;return i.rendering.strokeColor&&(e=i.rendering.strokeColor),i.rendering.fillColor&&(t=i.rendering.fillColor),e||t||(e=s.Colors.Black),{stroke:e,fill:t}}render(e){const{stroke:t,fill:i}=this.determineColors();if(this.rendering.glowIntensity&&(e.shadowBlur=this.rendering.glowIntensity,e.shadowColor=this.rendering.glowColor||t||i),e.beginPath(),t&&(e.strokeStyle=t),i&&(e.fillStyle=i),e.lineWidth=this.rendering.strokeWidth||1,this.components.length)for(const t of this.components)t.render(e);else for(const t of this.vertices)e.lineTo(t.x,-t.y);e.closePath(),i&&e.fill(),t&&e.stroke()}scale(e){if(0!==e)for(let t=0;t<this.vertices.length;t++){const i=(this.vertices[t].x-this.position.x)*e,s=(this.vertices[t].y-this.position.y)*e;this.vertices[t].x=i+this.position.x,this.vertices[t].y=s+this.position.y}}divide(e){0!==e&&this.scale(1/e)}}},537:(e,t)=>{var i,s,o,n;Object.defineProperty(t,"__esModule",{value:!0}),t.Colors=t.ShapeType=t.Environment=t.Movement=void 0,function(e){e[e.Up=0]="Up",e[e.Down=1]="Down",e[e.Left=2]="Left",e[e.Right=3]="Right"}(i||(t.Movement=i={})),function(e){e[e.Browser=0]="Browser",e[e.Node=1]="Node"}(s||(t.Environment=s={})),function(e){e[e.Generic=0]="Generic",e[e.Polygon=1]="Polygon",e[e.Circle=2]="Circle",e[e.Line=3]="Line"}(o||(t.ShapeType=o={})),function(e){e.Pink="#F177DD",e.LightRed="#FC7677",e.Red="#F14E54",e.Yellow="#FFE869",e.Peach="#FCC376",e.Orange="#FFA500",e.Green="#00E16E",e.BrightGreen="#43FF91",e.NeonGreen="#8AFF69",e.Blue="#00B2E1",e.DarkBlue="#768DFC",e.Purple="#BF7FF5",e.Gray="#C0C0C0",e.Black="#000000",e.White="#FFFFFF"}(n||(t.Colors=n={}))},285:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigurationError=t.InternalError=void 0;class i extends Error{constructor(e){super("[SYSTEM]: Whoops, something went wrong! Please report it at our GitHub page: "+e),this.name="InternalError"}}t.InternalError=i;class s extends Error{constructor(e){super("[SYSTEM]: An error occurred when configuring an Entity or the System: "+e),this.name="ConfigurationError"}}t.ConfigurationError=s},703:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Camera=void 0;const s=i(875);t.Camera=class{setCenter(e){this.position.x=e.x,this.position.y=e.y}setCenterBody(e){this.position=e.shape.position}getSystemCoordinates(e){}constructor({position:e,zoom:t},i){this.position=new s.Vector(0,0),this.zoom=1,this.setCenter(e||new s.Vector(0,0)),this.zoom=t||1,this.system=i}}},959:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Renderer=void 0;const s=i(537),o=i(285);t.Renderer=class{constructor(e,t){this.framerate={fpsArr:[],fps:0,dt:0,lastUpdate:0},this.system=t,this.canvas=e.canvas;const i=this.canvas.getContext("2d");if(!i)throw new o.ConfigurationError("Could not configure Renderer: Your browser does not support CanvasRenderingContext2D.");this.context=i,window.addEventListener("resize",(()=>{this.canvas.width=window.innerWidth*window.devicePixelRatio,this.canvas.height=window.innerHeight*window.devicePixelRatio})),window.dispatchEvent(new Event("resize")),this.configure(e),requestAnimationFrame(this.render.bind(this))}configure(e){this.rendering={canvas:this.canvas,background:e.background||s.Colors.White,hooks:e.hooks||{},clear:e.clear||!0,gridSize:e.gridSize||0,gridColor:e.gridColor||s.Colors.Black,gridWidth:e.gridWidth||1}}render(){var e,t,i,s,o,n,r,h;this.framerate.dt=performance.now()-this.framerate.lastUpdate,this.framerate.lastUpdate=performance.now(),this.framerate.fpsArr.length>30&&this.framerate.fpsArr.shift(),this.framerate.fpsArr.push(this.framerate.dt);let a=0;for(const e of this.framerate.fpsArr)a+=e;if(this.framerate.fps=Math.round(1e3/(a/this.framerate.fpsArr.length)),this.rendering.clear&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.save(),this.context.fillStyle=this.rendering.background,this.context.fillRect(0,0,this.canvas.width,this.canvas.height),null===(t=(e=this.rendering.hooks).preRender)||void 0===t||t.call(e,this.context),this.context.scale(this.system.camera.zoom,this.system.camera.zoom),this.context.translate(this.canvas.width/2/this.system.camera.zoom-this.system.camera.position.x,this.canvas.height/2/this.system.camera.zoom+this.system.camera.position.y),0!==this.rendering.gridSize)if(this.context.strokeStyle=this.rendering.gridColor,this.context.lineWidth=this.rendering.gridWidth,this.system.width&&this.system.height){const e=this.system.width/2,t=this.system.height/2;for(let i=-t;i<=t;i+=this.rendering.gridSize)this.context.beginPath(),this.context.moveTo(-e,i),this.context.lineTo(e,i),this.context.stroke();for(let i=-e;i<=e;i+=this.rendering.gridSize)this.context.beginPath(),this.context.moveTo(i,-t),this.context.lineTo(i,t),this.context.stroke()}else{for(let e=0;e<this.canvas.width;e+=this.rendering.gridSize)this.context.beginPath(),this.context.moveTo(e,0),this.context.lineTo(e,this.canvas.height),this.context.stroke();for(let e=0;e<this.canvas.height;e+=this.rendering.gridSize)this.context.beginPath(),this.context.moveTo(0,e),this.context.lineTo(this.canvas.width,e),this.context.stroke()}this.context.strokeStyle=this.rendering.gridColor;for(const e of this.system.bodys)e&&(this.context.save(),null===(s=(i=e.shape.rendering.hooks).preRender)||void 0===s||s.call(i,e.shape,this.context),e.render(this.context),null===(n=(o=e.shape.rendering.hooks).postRender)||void 0===n||n.call(o,e.shape,this.context),this.context.restore());this.context.restore(),null===(h=(r=this.rendering.hooks).postRender)||void 0===h||h.call(r,this.context)}}},875:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Vector=void 0;class i{constructor(e,t){this.x=0,this.y=0,this.x=e,this.y=t}static toCartesian(e,t){return new i(e*Math.cos(t),e*Math.sin(t))}add(e){return this.x+=e.x,this.y+=e.y,this}subtract(e){return this.x-=e.x,this.y-=e.y,this}scale(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e,this.y/=e,this}normalize(){const e=this.magnitude;return 0===e?this.x=this.y=0:(this.x/=e,this.y/=e),this}distance(e){return this.clone.subtract(e).magnitude}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}project(e){return 0===e.x&&0===e.y?new i(0,0):e.clone.scale(this.dot(e)/e.magnitudeSq)}get orthogonal(){return new i(-this.y,this.x)}angle(e={x:0,y:0}){return Math.atan2(this.y-e.y,this.x-e.x)}rotate(e){const t=this.magnitude;return this.x=t*Math.cos(e),this.y=t*Math.sin(e),this}get magnitude(){return Math.sqrt(this.magnitudeSq)}set magnitude(e){const t=this.angle();this.x=e*Math.cos(t),this.y=e*Math.sin(t)}get magnitudeSq(){return this.x*this.x+this.y*this.y}get clone(){return new i(this.x,this.y)}static distance(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}static add(e,t){return new i(e.x+t.x,e.y+t.y)}static subtract(e,t){return new i(e.x-t.x,e.y-t.y)}static scale(e,t){return new i(e.x*t,e.y*t)}static divide(e,t){return new i(e.x/t,e.y/t)}}t.Vector=i}},t={};var i=function i(s){var o=t[s];if(void 0!==o)return o.exports;var n=t[s]={exports:{}};return e[s](n,n.exports,i),n.exports}(876),s=exports;for(var o in i)s[o]=i[o];i.__esModule&&Object.defineProperty(s,"__esModule",{value:!0})})();